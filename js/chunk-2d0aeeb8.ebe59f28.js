(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aeeb8"],{"0bb2":function(e,t,n){"use strict";n.r(t);n("3324");var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.show,width:"30%",top:"5%","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.show=t}}},[t("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"small"},model:{value:e.filterText,callback:function(t){e.filterText="string"===typeof t?t.trim():t},expression:"filterText"}}),t("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeNodeAll(t)}},model:{value:e.menuNodeAll,callback:function(t){e.menuNodeAll=t},expression:"menuNodeAll"}},[e._v("全选/全不选")]),t("el-scrollbar",{staticStyle:{height:"60vh"}},[t("el-tree",{ref:"tree",attrs:{data:e.menuList,"show-checkbox":"","node-key":"id",props:e.defaultProps,"default-expanded-keys":e.expandedKeys,"check-strictly":"","filter-node-method":e.filterNode}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e._sever}},[e._v("确 定")])],1)],1)},o=[],l=n("7c3e"),r=n("41e4"),c=n("00f8"),i=n("6730"),a=(n("df89"),n("c048"),n("e1a1"),n("6eef")),d=n("562c"),u=n("ed08"),f={name:"",props:{show:{type:Boolean,default:!1},row:{type:Object,default:function(){}},title:{type:String,default:"角色权限"}},data:function(){return{menuList:[],filterText:"",menuNodeAll:!1,defaultProps:{children:"children",label:"title"},expandedKeys:[],menuOptions:[]}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.init()},computed:Object(i["a"])({},Object(a["d"])("user",["roles"])),methods:Object(i["a"])(Object(i["a"])({},Object(a["b"])("system",["getRolesMenus","rolesSever"])),{},{init:function(){var e=this;return Object(c["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRolesMenus();case 2:e.menuOptions=t.sent,e.menuList=Object(d["a"])(Object(d["f"])(e.menuOptions),!1),e.expandedKeys=e.row.menus.map((function(e){return e.id})),e.$nextTick((function(){e.expandedKeys.length==e.menuOptions.length&&(e.menuNodeAll=!0),e.$refs.tree.setCheckedKeys(Object(r["a"])(e.expandedKeys))}));case 6:case"end":return t.stop()}}),t)})))()},handleCheckedTreeNodeAll:function(e){this.$refs.tree.setCheckedNodes(e?this.menuOptions:[])},filterNode:function(e,t){return!e||-1!==t.title.indexOf(e)},_sever:function(){var e=this;return Object(c["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(u["d"])("正在保存"),t.next=3,e.rolesSever({id:e.row.id,menus:e.$refs.tree.getCheckedKeys()});case 3:e.handleClose();case 4:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.$refs.tree.setCheckedKeys([]),this.expandedKeys=[],this.$emit("_close")}})},h=f,p=n("0460"),b=Object(p["a"])(h,s,o,!1,null,null,null);t["default"]=b.exports}}]);