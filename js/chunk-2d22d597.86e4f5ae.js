(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d597"],{f6b3:function(e,t,a){"use strict";a.r(t);a("3324");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-page"},[t("div",{staticClass:"main_list"},[t("div",{staticClass:"queryInfo"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{sm:8,md:6}},[t("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择类型"},model:{value:e.queryInfo.params.type,callback:function(t){e.$set(e.queryInfo.params,"type",t)},expression:"queryInfo.params.type"}},[t("el-option",{attrs:{label:"PC",value:"1"}}),t("el-option",{attrs:{label:"小程序",value:"2"}})],1)],1),t("el-col",{attrs:{sm:8,md:6}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"query",expression:"'query'"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSizeChange()}}},[e._v("搜索")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.reset_query()}}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"button_group"},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"add",expression:"'add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.groupAdd(0)}}},[e._v("新增")])],1),t("el-table",{attrs:{border:"",size:"small","row-key":"id",data:e.tableData}},[t("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"content",label:"内容","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[1==r.type?t("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("PC")]):e._e(),2==r.type?t("el-tag",{attrs:{effect:"dark"}},[e._v("小程序")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[r.state?t("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("发布")]):t("el-tag",{attrs:{effect:"dark"}},[e._v("草稿")])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{staticClass:"textym",attrs:{disabled:r.state,type:"text",size:"mini"},on:{click:function(t){return e.release(r)}}},[e._v("发布")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"update",expression:"'update'"}],staticClass:"textyell",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.groupAdd(r)}}},[e._v("修改")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"delete",expression:"'delete'"}],staticClass:"textRed",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.remove(r.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"hide-on-single-page":"","current-page":e.queryInfo.offset,"page-sizes":[15,20,30],"page-size":e.queryInfo.limit,layout:"sizes, prev, pager, next,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{width:"50%",title:e.dialog.title,visible:e.dialog.show,"before-close":e.dialogClose,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[t("el-form",{ref:"addFormData",attrs:{model:e.addFormData,rules:e.formRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.addFormData.title,callback:function(t){e.$set(e.addFormData,"title","string"===typeof t?t.trim():t)},expression:"addFormData.title"}})],1),t("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.addFormData.content,callback:function(t){e.$set(e.addFormData,"content","string"===typeof t?t.trim():t)},expression:"addFormData.content"}})],1),t("el-form-item",{attrs:{label:"公告类型",prop:"type"}},[t("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择类型"},model:{value:e.addFormData.type,callback:function(t){e.$set(e.addFormData,"type",t)},expression:"addFormData.type"}},[t("el-option",{attrs:{label:"PC",value:"1"}}),t("el-option",{attrs:{label:"小程序",value:"2"}})],1)],1),t("el-form-item",{attrs:{label:"是否发布",prop:"type"}},[t("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择类型"},model:{value:e.addFormData.state,callback:function(t){e.$set(e.addFormData,"state",t)},expression:"addFormData.state"}},[t("el-option",{attrs:{label:"草稿",value:!1}}),t("el-option",{attrs:{label:"发布",value:!0}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.dialogClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.severDialog}},[e._v("确 定")])],1)],1)],1)},s=[],o=a("7c3e"),n=a("00f8"),l=a("6730"),i=a("6eef"),c=a("ed08"),u={components:{},data:function(){return{total:0,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},dialog:{title:"新增",show:!1},queryInfo:{params:{},limit:15,offset:1,sort:{prop:"createdAt",order:"desc"}},tableData:[],check:[],addFormData:{},formRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],type:[{required:!0,message:"请选择公告类型",trigger:"blur"}],state:[{required:!0,message:"请选择公告状态",trigger:"blur"}]},rolesData:[]}},computed:Object(l["a"])({},Object(i["d"])("theme",["PC"])),mounted:function(){this.seach_query()},methods:Object(l["a"])(Object(l["a"])({},Object(i["b"])("system",["noticeList","noticeDelete","addNotice","rolesList","resetPassword","userState"])),{},{seach_query:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(c["d"])("加载中"),t.next=3,e.noticeList(Object(l["a"])({},e.queryInfo));case 3:a=t.sent,e.tableData=a.data,e.total=a.count;case 6:case"end":return t.stop()}}),t)})))()},groupAdd:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e?(t.addFormData=Object(l["a"])({},e),t.dialog.title="修改"):(t.dialog.title="新增",t.addFormData={state:!1}),t.dialog.show=!0,t.$forceUpdate();case 3:case"end":return a.stop()}}),a)})))()},remove:function(e){var t=this;Object(c["a"])("确认删除","提示",{ok:function(){var a=Object(n["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Object(c["d"])("正在删除"),a.next=3,t.noticeDelete({id:[e]});case 3:t.seach_query();case 4:case"end":return a.stop()}}),a)})));function r(){return a.apply(this,arguments)}return r}()})},severDialog:function(){var e=this;this.$refs["addFormData"].validate(function(){var t=Object(n["a"])(Object(o["a"])().mark((function t(a){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return Object(c["d"])(!0),t.next=5,e.addNotice(e.addFormData);case 5:e.dialogClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},release:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Object(c["d"])(!0),a.next=3,t.addNotice({id:e.id,state:!0,type:e.type});case 3:t.seach_query();case 4:case"end":return a.stop()}}),a)})))()},reset_query:function(){this.queryInfo={params:{},limit:15,offset:1,sort:{prop:"createdAt",order:"desc"}}},dialogClose:function(){this.dialog.show=!1,this.addFormData={},this.$refs["addFormData"].resetFields(),this.seach_query()},handleSizeChange:function(e){this.queryInfo.limit=e||this.queryInfo.limit,this.queryInfo.offset=1,this.seach_query()},handleCurrentChange:function(e){this.queryInfo.offset=e,this.seach_query()}})},d=u,p=a("0460"),m=Object(p["a"])(d,r,s,!1,null,null,null);t["default"]=m.exports}}]);